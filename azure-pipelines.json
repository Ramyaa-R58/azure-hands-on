{
  "$schema": "https://json.schemastore.org/azure-pipelines.json",
  "trigger": [
    "main"
  ],
  "pool": {
    "vmImage": "ubuntu-latest"
  },
  "steps": [
    {
      "task": "UsePythonVersion@0",
      "inputs": {
        "versionSpec": "3.10",
        "architecture": "x64"
      }
    },
    {
      "script": "pip install -r requirements.txt",
      "displayName": "Install Dependencies"
    },
    {
      "script": "pip install pytest",
      "displayName": "Install Testing Framework"
    },
    {
      "script": "pytest",
      "displayName": "Run Tests",
      "continueOnError": true
    },
    {
      "task": "ArchiveFiles@2",
      "inputs": {
        "rootFolderOrFile": "$(System.DefaultWorkingDirectory)",
        "includeRootFolder": false,
        "archiveType": "zip",
        "archiveFile": "$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip",
        "replaceExistingArchive": true
      },
      "displayName": "Create Deployment Package"
    },
    {
      "task": "PublishBuildArtifacts@1",
      "inputs": {
        "PathtoPublish": "$(Build.ArtifactStagingDirectory)",
        "ArtifactName": "drop"
      },
      "displayName": "Publish Artifacts"
    }
  ]
}
